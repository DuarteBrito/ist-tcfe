*
* NGSPICE simulation script
* Lab3
*

* forces current values to be saved
.options savecurrents

******************************************

*Va supply voltage
Va 2 0 SIN(12 2 50 0 0)

*transformer
*F1 1 0 E1 17
*E1 2 0 1 0 0.05882352941

*Voltage Regulator
* R2
R2 2 5 1k

* Diode 5
D5 5 6 Default

* Diode 6
D5 6 7 Default

* Diode 7
D5 7 0 Default

.model Default D

.op

.end

.control

*makes plots in color
set hcopypscolor=0
set color0=white
set color1=black
set color2=red
set color3=blue
set color4=violet
set color5=rgb:3/8/0
set color6=rgb:4/0/0

echo "********************************************"

echo  "Transient analysis"

echo "********************************************"
 
tran 0.0002 1 0.8

echo "info_TAB"
print mean(v(2))
*print mean(v(2)-12)
print maximum(v(2))-minimum(v(2))
print maximum(v(2))
print maximum(v(2))-minimum(v(2))
echo "info_END"

*hardcopy outputvoltage.ps v(2) (v(2))
hardcopy outputvoltage.ps v(2) v(5) v(6)

echo outputvoltage_FIG

*echo "********************************************"
*echo  "Transient analysis"
*echo "********************************************"

hardcopy detail.ps v(2)-12
echo detail_FIG

quit

.endc
